= Network deployment
:experimental:
// Define unicode for Apple Command key.
:commandkey: &#8984;
:proglang: Motoko
:platform: Internet Computer platform
:IC: Internet Computer
:company-id: DFINITY
:sdk-short-name: DFINITY Canister SDK
:sdk-long-name: DFINITY Canister Software Development Kit (SDK)
ifdef::env-github,env-browser[:outfilesuffix:.adoc]

[[net-quick-start]]
This _Quick Start_ scenario assumes that you are installing the {sdk-short-name} for the first time and deploying the default project on the {IC} network **running remotely**.

If you are only deploying projects in a local development environment, see the link:local-quickstart{outfilesuffix}[Local development] scenario.

To get started, let's build and deploy a simple Hello application that has just one function—called `+greet+`. 
The `+greet+` function accepts one text argument and returns the result with a greeting similar to **Hello,{nbsp}everyone!** in a terminal if you run the application using the command-line or in an HTML page if you access the application in a browser.

[[net-before]]
== Before you begin

Before you download and install this release of the {sdk-short-name}, verify the following:

* You have an internet connection and access to a shell terminal on your local **macOS** or **Linux** computer.
+
Currently, the {sdk-short-name} only runs on computers with a macOS or Linux operating system.

* You have provided the {company-id} Foundation with a principal associated with your user identity and have received a **wallet canister identifier** in return.
+
A wallet canister with **cycles** is required to deploy and manage applications on the {IC}.

* You have `+node.js+` installed if you want to access the default front-end for the default project.

If you aren’t sure how to open a new terminal shell on your local computer or how to install `node.js`, see link:newcomers{outfilesuffix}[Preliminary steps for newcomers].
If you are comfortable meeting the prerequisites without instructions, continue to <<Download and install>>.

[[net-download-sdk]]
== Download and install

You can download the latest version of the {sdk-long-name} directly from within a terminal shell on your local computer.

To download and install:

. Open a terminal shell on your local computer.
+
For example, open Applications, Utilities, then double-click *Terminal* or press kbd:[{commandkey} + spacebar] to open Search, then type `terminal`.
. Download and install the {sdk-short-name} package by running the following command:
+
[source,bash]
----
DFX_VERSION=0.7.0-beta.1 sh -ci "$(curl -fsSL https://sdk.dfinity.org/install.sh)"
----
+
This command prompts you to read and accept the license agreement before installing the {company-id} execution command-line interface (CLI) and its dependencies on your local computer.
. Type `+y+` and press kbd:[Return] to continue with the installation.
+
The command displays information about the components being installed on the local computer.

[[net-verify-sdk-version]]
== Verify the SDK is ready to use

If the installation script runs without any errors, everything you need to start developing programs that run on the {platform} will be available on your local computer.

To verify the SDK is ready to use:

. Open a terminal shell on your local computer, if you don’t already have one open.
. Check that you have the {company-id} execution command-line interface (CLI) installed and the `+dfx+` executable is available in your PATH by running the following command:
+
[source,bash]
----
dfx --version
----
+
The command displays version information for the `+dfx+` command-line executable similar to the following:
+
....
dfx 0.7.0-beta.1
....
. Preview usage information for the other `+dfx+` command-line sub-commands by running the following command:
+
[source,bash]
----
dfx --help
----
+
The command displays usage information for the `+dfx+` parent command and its subcommands.

[[net-new-project]]
== Create a new project

Applications for the {IC} start as **projects**.
You create projects using the `+dfx+` parent command and its subcommands.
Creating a new project with `+dfx+` adds a default project directory structure to your development workspace with template files to get you started.

To create a new project for your first application:

[arabic]
. Open a terminal shell on your local computer, if you don’t already have one open.
. Create a new project named `+hello+` by running the following command:
+
[source,bash]
----
dfx new hello
----
+
The `+dfx new hello+` command creates a new `+hello+` project directory, template files, and a new `+hello+` Git repository for your project.
+
If you use a different project name instead of `+hello+`, make note of the name you used. You'll need to use that project name in place of the `+hello+` project name throughout these instructions.
. Change to your project directory by running the following command:
+
[source,bash]
----
cd hello
----

[[ping-the-network]]
== Check the connection to the network

Before you can deploy your first project on the {IC}, you need to connect to the network gateway running remotely on a sub-network that you can access.
There is a reserved network alias that you can use to access the {IC} running remotely on nodes in data centers. The network alias is a system setting that's defined internally, so there's nothing you need to configure in your projects by default.

To check your connection to the {IC} network:

[arabic]
. Check that you are in the root directory for your project, if needed.
. Check the current status of the {IC} network and your ability to connect to it by running the following command for the network alias `+alpha+`:
+
[source,bash]
----
dfx ping alpha
----
+
If the `+alpha+` network alias for the {IC} network gateway is not configured in your project `+dfx.json+` file, you might see a `+ComputeNetworkNotFound+` error.
To manually specify the network provider IP address and alias for the {IC} network, open the `+dfx.json+` file in a text editor and add the following under the `+networks+` key:
+
[source,json]
----
    "alpha": {
      "providers": [
        "https://mercury.dfinity.network"
      ],
      "type": "persistent"
    }  
----
+
NOTE: If you are manually updating the `dfx.json` file, you need to add a comma after the brace (`}`) that defines the end of the `local` network section.
. Verify the command returns information about the {IC} network to which you are connecting.
+
For example, you should see output similar to the following:
+
....
{
  "ic_api_version": "0.15.6"  "impl_hash": "2404c16edc44f3f23b99a9866839042a5a92d19986ba78c1d98e0f21c0f4996a"  "impl_version": "0.1.0"  "root_key": [48, 129, 130, 48, 29, 6, 13, 43, 6, 1, 4, 1, 130, 220, 124, 5, 3, 1, 2, 1, 6, 12, 43, 6, 1, 4, 1, 130, 220, 124, 5, 3, 2, 1, 3, 97, 0, 141, 112, 102, 140, 151, 59, 6, 112, 118, 149, 202, 39, 63, 86, 168, 196, 227, 57, 230, 191, 67, 238, 205, 17, 183, 233, 137, 163, 211, 157, 153, 251, 138, 145, 185, 82, 190, 141, 124, 50, 51, 102, 191, 24, 117, 136, 70, 95, 12, 228, 191, 236, 36, 136, 20, 28, 165, 164, 5, 209, 196, 101, 75, 118, 85, 63, 185, 15, 53, 16, 166, 200, 130, 252, 124, 254, 246, 22, 4, 212, 212, 61, 243, 237, 154, 66, 15, 51, 218, 93, 183, 185, 44, 223, 215, 232]
}
....
. Verify your principal exists on the network by running the following command
+
[source,bash]
----
dfx identity --network=alpha get-principal
----
+
The command should display a textual representation of your identity similar to the following:
+
....
zen7w-sjxmx-jcslx-ey4hf-rfxdq-l4soz-7ie3o-hti3o-nyoma-nrkwa-cqe
....
+

IMPORTANT: You should note that this principal is directly associated with a specific cycles wallet canister identifier. If you change or remove the identity associated with the principal, you also lose access to the cycles wallet it controls.

[[set-wallet]]
== Validate the wallet application

You must have a wallet canister with ICP tokens or execution cycles to create, deploy, and manage applications that run on the {IC}.
If you submitted a textual representation of a principal to the {company-id} Foundation, you should have received a wallet canister identifier in return.

Note that upgrades to the {IC} have changed the encoding for principals and new wallet canister identifiers. If you submitted a principal and received a wallet prior to the current release, it is likely that the principal and wallet canister are no longer valid and you should regenerate a new principal after you upgrade the {sdk-short-name} to the latest version.

To validate your wallet for the network:

. Associate the wallet canister identifier you received for the network with your identity by running a command similar to the following:
+
[source.bash]
----
dfx identity --network=alpha set-wallet <WALLET-CANISTER-ID>
----
+
For example:
+
....
dfx identity --network=alpha set-wallet f3yw6-7qaaa-aaaab-qaabq-cai
....
+
The command displays output similar to the following:
+
....
Setting wallet for identity 'default' on network 'alpha' to id 'f3yw6-7qaaa-aaaab-qaabq-cai'
Checking availability of the canister on the network...
....
. Check that your wallet canister is properly configured and holds a balance of cycles by running a command similar to the following:
+
[source,bash]
----
dfx canister --network=alpha call <WALLET-CANISTER-ID> wallet_balance
----
+
The command returns the balance for the wallet canister identifier you specified as a record using Candid format.
For example, the command might display a record with an `+amount+` field (represented by the hash `+3_573_748_184+`) and a balance of 99,988,118,091,113 cycles like this:
+ 
....
(record { 3_573_748_184 = 99_988_118_091_113 })
....
+
Using the command-line to call the wallet canister lets you quickly verify that your wallet is available and ready to use. But results returned in Candid format can be difficult to read, so let's take another look at your wallet from a web browser.
. Open a web browser and navigate to the wallet application front-end by using a URL similar to the following:
+
....
https://<WALLET-CANISTER-ID>.ic0.app/?host=https://mercury.dfinity.network
....
+
The first time you access the application, you are prompted to register your device, authenticate your identity, and authorize access to the wallet.
+
. Click *Authenticate* to continue then click *Create Profile*.
+
Use a security key or another form of authentication such as touch ID to create your profile.
After successfully creating the profile, you are prompted to authorize the session.
For example: 
+

image:auth-session.png[]
. Authorize access to the wallet application by clicking *Allow* and confirming your identity, then click *Finish*.
. Register the device you are using for this session by copying the command displayed in the Register Your device page and running it in a terminal.
+
For example, call the `+authorize+` method for the wallet canister with a command similar to the following:
+
....
dfx canister --no-wallet --network alpha call "f3yw6-7qaaa-aaaab-qaabq-cai" authorize '(principal "uymke-5ldqg-w6g7u-qjvng-efsfp-t45m2-tekqj-xvjel-57yv2-hpsdl-zqe")'
....
+
When the browser refreshes after running the authorize command, the cycles wallet for your principal account is displayed.
. View your cycles balance and activity in the browser.
+
For example:
+
image::cycles-wallet.png[]

[[net-deploy]]
== Register, build, and deploy the application

After you connect to the {IC} network and validate your wallet, you can register, build, and deploy your sample application.

To deploy your first application on the {IC}:

. In your terminal shell, check that you are still in the root directory for your project.
. Ensure that `+node+` modules are available in your project directory, if needed, by running the following command:
+
[source,bash]
----
npm install
----
+
For more information about this step, see link:../developers-guide/webpack-config{outfilesuffix}#troubleshoot-node[Ensuring node is available in a project].
. Register, build, and deploy your first application by running the following command:
+
[source,bash]
----
dfx deploy --network=alpha --with-cycles=2500000000000
----
+
--
* The `+--network+` option specifies the network alias or URL for deploying the application.
+
This option is required to install on the {IC} running remotely.
* The `+--with-cycles+` option specifies the number of initial cycles you want to transfer from your wallet to the application you are deploying.
+
This option is required because a canister must have cycles to be deployed on the {IC} running remotely.
+
You **must** specify an initial cycle balance grater than one trillion (1,000,000,000,000) to deploy a canister with cycles.
--
+
The `+dfx deploy+` command output displays information about the operations it performs.
+
For example, this step registers two network-specific identifiers—one for the `+hello+` main program and one for the `+hello_assets+` front-end user interface—and installation information similar to the following:
+
....
Deploying all canisters.
Creating canisters...
Creating canister "hello"...
"hello" canister created on network "alpha" with canister id: "gznlb-paaaa-aaaab-qaakq-cai"
Creating canister "hello_assets"...
"hello_assets" canister created on network "alpha" with canister id: "gqoa5-ziaaa-aaaab-qaala-cai"
Building canisters...
Building frontend...
Installing canisters...
Installing code for canister hello, with canister_id gznlb-paaaa-aaaab-qaakq-cai
Installing code for canister hello_assets, with canister_id gqoa5-ziaaa-aaaab-qaala-cai
Authorizing our identity (default) to the asset canister...
Uploading assets to asset canister...
Deployed canisters.
....
. Call the `+hello+` canister and the predefined `+greet+` function by running the following command:
+
[source,bash]
----
dfx canister --network=alpha call hello greet everyone
----
+
Let's take a closer look at this example:
+
-- 

* Using the `+--network=alpha+` option indicates that the canister you want to call is deployed on the `+alpha+` network. The `+alpha+` network alias is an internally-reserved alias for accessing the {IC}.
* Note that the `+--network=alpha+` option must precede the operation subcommand, which, in this case, is the `+dfx canister call+` command.
* The `+hello+` argument specifies the name of the canister you want to call.
* The `+greet+` argument specifies the name of the function you want to call in the `+hello+` canister.
* The text string `+everyone+` is the argument that you want to pass to the `+greet+` function.
--
. Verify the command displays the return value of the `+greet+` function.
+
For example:
+
....
("Hello, everyone!")
....
. Refresh the browser to see your new cycle balance and recent activity.
+
For example:
+
image::wallet-ui-2.png[]

[[quickstart-frontend]]
== Test the application front-end

Now that you have verified that your application has been deployed and tested its operation using the command line, let's verify that you can access the front-end using your web browser.

To access the application front-end:

. Open a browser.
. Navigate to the front-end for the application using a URL that consists of the `+hello_assets+` identifier and the `+.ic0.app+` suffix.
+
For example, the full URL should look similar to the following:
+
....
https://gqoa5-ziaaa-aaaab-qaala-cai.ic0.app//?host=https://mercury.dfinity.network
....
+
Navigating to this URL displays the HTML entry page for the template application.
For example:
+
image:net-front-end-prompt.png[HTML page with prompt]

. Type a greeting, then click *Click Me* to return the greeting.
+
For example:
+
image:net-result.png[Hello, Everyone! greeting]

== Create a wallet for another identity

. In your terminal shell, create a second identity by running the following command:
+
[source,bash]
----
dfx identity new sf-wallet
----
. Set the new identity to be your currently-active context by running the following command:
+
[source,bash]
----
dfx identity use sf-wallet
----
+
The command displays output similar to the following:
+
....
Using identity: "sf-wallet".
....
. Get the principal for the new `+sf_admin+` user identity by running the following command:
+
[source,bash]
----
dfx identity get-principal
----
The command displays output similar to the following:
+
....
vpqee-nujda-46rtu-4noo7-qnxmb-zqs7g-5gvqf-4gy7t-vuprx-u2urx-gqe
....
. In your cycles wallet, click the menu icon to display the list of actions available, then click *Create a Wallet*.
+
image:menu-expanded.png[]
. Paste the principal for the new identity you created in the controller field, specify the number of cycles for the new wallet, then click *Create*.
+
image:create-wallet.png[]
. Copy the canister identifier for the new wallet, then click *Okay*.
+
image:new-id.png[]
+
You now have a new principal and cycles wallet canister that you can use for testing or share with someone else to give them cycles for a service.

[[next-steps]]
== Next steps

Now that you have seen how to deploy an application on the {IC} network, you are ready to develop and deploy programs of your own.
There are more detailed examples and tutorials for you to explore in link:../developers-guide/tutorials-intro{outfilesuffix}[Tutorials], the link:https://github.com/dfinity/examples[examples] repository, and in the link:../language-guide/motoko{outfilesuffix}[_{proglang} Programming Language Guide_].

* Have questions? mailto:support@dfinity.org?subject=NetworkQuickstart[Contact us].
* Want to join the community? Visit our https://forum.dfinity.org/[community forum].
* Want to stay informed about new features and updates? Sign up for https://dfinity.org/newsletter[Developer updates].
